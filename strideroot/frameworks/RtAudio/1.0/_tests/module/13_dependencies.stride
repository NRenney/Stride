use DesktopAudio version 1.0

module UsedInTest {
	ports: [
		port OutputPort {
			main: on
			direction: "output"
			block: Output
		}
		port InputPort {
			main: on
			direction: "input"
			block: Input
		}
	]
	streams: [
		Input - 1 >> Output;
	]
}

module Test {
	ports: [
		port OutputPort {
			main: on
			direction: "output"
			block: Output
		}
		port InputPort {
			main: on
			direction: "input"
			block: Input
		}
	]
	streams: [
		Input * 2 >> UsedInTest() >> UsedInTest2() >> UsedInTest3() >> Output;
	]
}

module UsedInTest2 {
	ports: [
		port OutputPort {
			main: on
			direction: "output"
			block: Output
		}
		port InputPort {
			main: on
			direction: "input"
			block: Input
		}
	]
	streams: [
		Input - 1 >> Output;
	]
}

module Test2 {
	ports: [
		port OutputPort {
			main: on
			direction: "output"
			block: Output
		}
		port InputPort {
			main: on
			direction: "input"
			block: Input
		}
	]
	streams: [
		Input / 3 >> UsedInTest() >> UsedInTest2() >> UsedInTest3() >> Output;
	]
}

module UsedInTest3 {
	ports: [
		port OutputPort {
			main: on
			direction: "output"
			block: Output
		}
		port InputPort {
			main: on
			direction: "input"
			block: Input
		}
	]
	streams: [
		Input - 1 >> Output;
	]
}

AudioIn >> Test() >> Test2() >>AudioOut;
